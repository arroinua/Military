/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

{
    
/* 
 * Получить список текущих соединений.
 * 
 * method:  "getCurrentCalls"
 * 
 * params:  Нет
 * 
 * result:  список текущих соединений
 *          "caller":   вызывающий номер
 *          "called":   вызываемый номер
 *          "time":     длительность соединения (только для соединенных звонков
 * 
 */

"getCurrentCalls": {
    "type":                 "method",
    
    "params": {
    },
    
    "result": [
        {
            "caller":       "string",
            "called":       "string",
            "time":         "number",
        }
    ]
},

/* 
 * Получить список соединений и загрузку по транкам.
 * 
 * method:  "getCurrentState"
 * 
 * params:  Нет
 * 
 * result:  таблица параметров:
 * 
 *          "in":       количество входящих соединений
 *          "out":      количество исходящих соединений
 *          "conn":     количество соединенных вызовов
 *          "load":     загрузка портов (в процентах)
 *          "trunks":   список транков
 *                      "id":   идентификатор транка
 *                      "name": имя транка
 *                      "in":   количество входящих соединений
 *                      "out":  количество исходящих соединений
 *                      "load": загрузка транка (в процентах)
 * 
 */

"getCurrentState": {
    "type":                 "method",
    
    "params": {
    },
    
    "result": {
        "in":               "number",
        "out":              "number",
        "conn":             "number",
        "load":             "number",       
        "trunks": [
            {
                "id":       "string",
                "name":     "string",
                "in":       "number",
                "out":      "number",
                "load":     "number",
            }
        ]
    }
},

/* 
 * Получить историю звонков.
 * 
 * method:  "getCalls"
 * 
 * params:  таблица параметров:
 *          "begin":    начальная граница выборки (в миллисекундах от 1.01.1970)
 *          "end":      конечная граница выборки (в миллисекундах от 1.01.1970)
 *          "number":   номер абонента. Если параметр отсутствует, выбираются все звонки
 *          "trunk":    имя транка
 *          "mode":     вид выборки:
 *                      0 - все звонки
 *                      1 - только соединенные звонки
 *                      2 - только внешние звонки
 *                      3 - только внешние соединенные звонки
 *          "order":    порядок выборки:
 *                      0 - по возрастанию даты
 *                      1 - по убыванию даты
 *          "limit":    максимальное число записей в выборке
 * 
 * result:  список текущих соединений
 *          "ts":       штамп времени звонка (в миллисекундах от 1.01.1970)
 *          "na":       вызывающий номер
 *          "nb":       вызываемый номер
 *          "ta":       транк входящего соединения
 *          "tb":       транк исходящего соединения
 *          "nc":       исходящий номер
 *          "cs":       код завершения (стандартный код ISDN)
 *          "td":       длительность соединения
 *          "tr":       тариф
 *          "ch":       стоимость звонка
 * 
 */

"getCalls": {
    "type":                 "method",
    
    "params": {
        "begin":            "number",
        "end":              "number",
        "number":           "string",
        "trunk":            "string",
        "mode":             "number",
        "order":            "number",
        "limit":            "number",
    },
    
    "result": [
        {
            "ts":           "number",
            "na":           "string",
            "nb":           "string",
            "ta":           "string",
            "tb":           "string",
            "nc":           "string",
            "cs":           "number",
            "td":           "number",
            "tr":           "number",
            "ch":           "number",
        }
    ]
},

}
